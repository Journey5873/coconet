<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>채팅 서비스</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(function(){
            // 방 생성
            $("#createRoomForm").submit(function(e){
                e.preventDefault();
                var roomName = $("#roomName").val();
                $.ajax({
                    type: "POST",
                    url: "/chat-service/api/room/create/test",
                    data: JSON.stringify({articleUUID: "50ba8300-d1b5-4cd8-b8fc-87271aebe71b", roomName: roomName, writerUUID: "6a2e74dc-beab-4d68-99fb-c15cc48dd455"}),
                    contentType: "application/json",
                    success: function(data){
                        alert("방이 성공적으로 생성되었습니다: " + data.roomName);
                    },
                    error: function(err){
                        alert("방 생성에 실패하였습니다: " + err);
                    }
                });
            });

            // 방 리스트 확인
            $("#getMyRooms").click(function(e){
                e.preventDefault();
                $.ajax({
                    type: "GET",
                    url: "/chat-service/api/room/my-room/9dfb4b63-d489-4653-aeee-11846b07906d/test",
                    success: function(data){
                        alert("방 리스트를 불러왔습니다.");
                        $("#roomList").empty();
                        $.each(data, function(index, room){
                            $("#roomList").append('<li>' + room.roomName + '</li>');
                        });
                    },
                    error: function(err){
                        alert("방 리스트 불러오기에 실패하였습니다: " + err);
                    }
                });
            });
        });
    </script>
</head>
<body>
<h1>방 생성하기</h1>
<form id="createRoomForm">
    <label for="roomName">방 이름:</label>
    <input type="text" id="roomName" name="roomName" required>
    <button type="submit">방 생성</button>
</form>
<h1>내 방 리스트 확인하기</h1>
<button id="getMyRooms">방 리스트 확인</button>
<ul id="roomList"></ul>
</body>
</html>
